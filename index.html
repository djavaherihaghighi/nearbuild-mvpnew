<!DOCTYPE html>
<html>
<head>
  <title>NearBuild Map with Filters</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    #map {
      height: 500px;
      width: 90%;
      margin: 20px auto;
    }
    select {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>NearBuild - Find Workers Nearby</h1>

  <!-- Filter Dropdown -->
  <label for="filter">Filter by Worker Type:</label>
  <select id="filter">
    <option value="All">All</option>
    <option value="Welder">Welder</option>
    <option value="Concrete Worker">Concrete Worker</option>
    <option value="Crane Operator">Crane Operator</option>
  </select>

  <!-- Map -->
  <div id="map"></div>

  <script>
    // Initialize the map
    var map = L.map('map').setView([34.0522, -118.2437], 12); // Los Angeles center

    // Load map tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Sample workers data
    var workers = [
      { type: "Welder", lat: 34.0522, lng: -118.2437 },
      { type: "Concrete Worker", lat: 34.0600, lng: -118.2500 },
      { type: "Crane Operator", lat: 34.0400, lng: -118.2700 },
      { type: "Welder", lat: 34.0650, lng: -118.2600 },
      { type: "Concrete Worker", lat: 34.0750, lng: -118.2400 }
    ];

    // Add markers to the map
    var markers = [];

    workers.forEach(function(worker) {
      var marker = L.marker([worker.lat, worker.lng])
        .bindPopup(worker.type)
        .addTo(map);
      marker.type = worker.type; // Save worker type inside marker
      markers.push(marker);
    });

    // Filter functionality
    document.getElementById("filter").addEventListener("change", function() {
      var selected = this.value;
      markers.forEach(function(marker) {
        if (selected === "All" || marker.type === selected) {
          marker.addTo(map);
        } else {
          map.removeLayer(marker);
        }
      });
    });
  </script>
</body>
</html>
